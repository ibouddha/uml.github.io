<!DOCTYPE html>
<html>

<head>
  <title>Task Manager</title>
  <link rel="stylesheet" href="{{url_for('static',filename='css/style.css')}}" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
</head>

<body>
  <div class="nav">
    <div class="logo"><img src="" alt="" /></div>
    <div class="profile">
      <ul>
        <li><a href="/all">Voir tout</a></li>
        <li>{{session['username']}}</li>
        <li><a href="/logout">Logout</a></li>
      </ul>
    </div>
  </div>
  <div class="main">
    <h1>Task Manager</h1>
    <div class="d-flex mb-4 justify-content-center">
      <div id="button">
        <button type="button" id="ajout" class="btn btn-primary me-6">
          <img src="{{ url_for('static', filename='images/plus.png') }}" alt="" />
        </button>
        <button type="button" id="fermer" class="btn btn-danger me-6">
          <img src="{{ url_for('static', filename='images/close.png') }}" alt="" />
        </button>
      </div>
      <div>
        <form action="/charger" method="get">
          <input type="text" name="" id="loadby" value="" width="2px" required>
          <button type="submit" id="load" class="btn btn-secondary">Charger</button>
        </form>
      </div>
      <div class="ms-auto">
        <div class="input-group" id="search_container">
          <input type="text" class="form-control form-control-sm" id="search" placeholder="Rechercher une tÃ¢che" />
          <button type="button" class="btn btn-outline-primary">
            <img src="{{ url_for('static', filename='images/search.png') }}" alt="" />
          </button>
        </div>
      </div>
    </div>


    <form id="add-task-form" method="POST" action="/add-task" class="row mt-3">
      <div class="col-sm-2 col-form-label">
        <label for="titre">Title</label>
      </div>
      <div class="col-sm-10 input-group mb-3">
        <input type="text" id="titre" name="titre" placeholder="Enter Title" required class="form-control">
      </div>
      <div class="col-sm-2 col-form-label">
        <label for="description">Description</label>
      </div>
      <div class="col-sm-10 input-group mb-3">
        <input type="text" id="description" name="description" placeholder="Enter Description" required
          class="form-control">
      </div>
      <div class="col-sm-2 col-form-label">
        <label for="state">State</label>
      </div>
      <div class="col-sm-10 input-group mb-3">
        <select name="state" id="state" class="form-control">
          <option value="todo">Todo</option>
          <option value="in progress">In Progress</option>
          <option value="done">Done</option>
        </select>
      </div>
      <div class="col-sm-12">
        <button type="submit" class="btn btn-success">Add Task</button>
      </div>
    </form>
  </div>
  
  {% if tasks %}
  <div id="task-list" class="row row-cols-1 row-cols-md-4 g-4">
    {% for task in tasks %}
    <div class="col">
      <div class="card border-primary shadow">
        <div class="card-body">
          <h5 class="card-title">{{task[1]}}</h5>
          <p class="card-text">{{task[2]}}</p>
          <p class="card-text" id="status_task">Status: {{task[3]}}</p>
          <div class="card-actions d-flex justify-content-between">
            <a href="/complete/{{task[0]}}" class="btn btn-success">Complete</a>
            <a href="/delete/{{task[0]}}" id="del" class="btn btn-danger">Delete</a>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <p class="no-data">No tasks found!</p>
  {% endif %}
  </div>

  <!-- <table id="tbody"></table> -->
  <div class="footer">
    <p>&copy; 2024 Bouddha Task Manager. All rights reserved.</p>
  </div>
  <script src="{{url_for('static',filename='js/index.js')}}"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    $(document).ready(function () {
      const form = $('#add-task-form');
      const toggleButton = $('#toggle-form');

      toggleButton.click(function () {
        form.toggle(); // Toggles the visibility of the form
      });
    });
  </script>
</body>

</html>